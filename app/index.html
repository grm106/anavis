<!DOCTYPE html>
<html>
<head>
  <title>anavis</title>
  <!-- build:css -->
  <link rel="stylesheet" href="/main.less">
  <!-- endbuild -->
</head>
<body>
  <!-- build:js -->
  <script src="/jspm_packages/system.js"></script>
  <script src="/config.js"></script>
  <script>System.import("main");</script>
  <!-- endbuild -->

  <script id="sound-template" type="text/html">
    <progress class="sound" data-bind="attr: { max: totalLength, value: currentPosition }, click: onClick, style: { 'display': state() === 'LOADING' ? 'none' : 'block' }"></progress>
  </script>

  <script id="part-template" type="text/html">
    <div class="part-outer" data-bind="style: { flex: length }">
      <div class="part-inner" data-bind="text: name, style: { color: $root.utils.getContrastColor(color()), backgroundColor: color }, attr: { title: name }" contenteditable></div>
    </div>
  </script>

  <script id="work-template" type="text/html">
    <div class="work" data-bind="template: { name: 'part-template', foreach: parts }"></div>
    <div class="sound" data-bind="template: { if: sound, name: 'sound-template', data: sound }"></div>
    <!-- ko ifnot: sound -->
    <div class="sound-loader" data-bind="soundDrop: onSoundDropped" style="height: 25px; background-color: silver;">Drop sound file here...</div>
    <!-- /ko -->
  </script>

  <av-toolbar></av-toolbar>

  <div data-bind="template: { name: 'work-template', foreach: works }"></div>

</body>
</html>
